
/* Base PWA styles */
html.pwa {
  overscroll-behavior-y: none;
}

body.pwa {
  overscroll-behavior-y: none;
  -webkit-touch-callout: none;
  user-select: none;
  -webkit-user-select: none;
}

/* PWA-specific mobile optimizations */
@media (max-width: 767px) {
  /* Enhanced header with safe area for PWA */
  .pwa .enhanced-header {
    padding-top: env(safe-area-inset-top, 0px);
  }
  
  /* PWA update notification styling */
  .pwa-update-notification {
    bottom: env(safe-area-inset-bottom, 16px);
  }
}

/* Flexbox layout for chat containers in PWA mode */
.pwa .chat-wrapper {
  display: flex;
  flex-direction: column;
  height: 100dvh;
}

.pwa .chat-messages {
  flex: 1;
  overflow-y: auto;
}

.pwa .chat-input {
  position: sticky;
  bottom: 0;
  background: white;
  padding: 8px;
  padding-bottom: max(env(safe-area-inset-bottom), 16px);
  z-index: 10;
}

/* iOS specific safe area fixes - only applied on iOS */
@supports (padding: env(safe-area-inset-bottom)) {
  @media (max-width: 767px) {
    /* Better spacing for iOS devices */
    .ios-device .chat-input {
      padding-bottom: max(env(safe-area-inset-bottom), 16px);
    }
    
    .ios-device .main-content {
      height: 100dvh; /* Use dynamic viewport height on iOS */
    }
    
    /* Better send button positioning on iOS */
    .ios-device .chat-input .send-button-mobile {
      bottom: max(env(safe-area-inset-bottom), 10px);
    }
  }
}

/* Update notification styling */
.pwa-update-notification {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  z-index: 100;
  width: 90%;
  max-width: 360px;
}

/* Simple helper classes for safe area insets */
.pb-safe {
  padding-bottom: max(env(safe-area-inset-bottom), 0px);
}

.mb-safe {
  margin-bottom: max(env(safe-area-inset-bottom), 0px);
}
